<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page 4 Pr0xy</title>
</head>
<body>
     <form id="uv-form">
        <input id="uv-address" type="text" placeholder="What's on your mind today.." class="search" autocomplete="off"/>
      </form>
          <iframe id="frame" style="height: 100vh; width: 100vw;"></iframe>

    <script type="module">
      (async () => {
        await import("/mux/index.js");
        await import("/scram/scramjet.all.js");
                await import("/scram/scramjet.sync.js");

      const { ScramjetController } = $scramjetLoadController();

const scramjet = new ScramjetController({
	files: {
		wasm: "/scram/scramjet.wasm.wasm",
		all: "/scram/scramjet.all.js",
		sync: "/scram/scramjet.sync.js",
  }
});

function makeURL(
	input,
	template = "https://search.brave.com/search?q=%s",
): string {
	try {
		return new URL(input).toString();
	} catch (err) {}

	const url = new URL(`http://${input}`);
	if (url.hostname.includes(".")) return url.toString();

	return template.replace("%s", encodeURIComponent(input));
}
scramjet.init();
navigator.serviceWorker.register("/sw.js");

const connection = new BareMux.BareMuxConnection("/mux/worker.js");
await connection.setTransport("/epoxy/index.mjs", [{ wisp: "wss://anura.pro/" }]);

alert("hey");
document.getElementById("uv-form").addEventListener("submit", async (e) => {
  e.preventDefault();
  document.getElementById("frame").src = scramjet.encodeUrl(makeURL(document.getElementById("uv-address").value));
})
      })();
// should i delete the node modueles so we can install scram no ddont the npm package is outdated i just uplodaed it
    </script>
</body>
</html>
